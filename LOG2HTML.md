# telnet-gui-log2html.py - Telnet Log to HTML Converter

Convert telnet session logs into beautiful, terminal-styled HTML pages with full ANSI color rendering.

## Features

- **ANSI rendering** - Interprets ANSI escape sequences as actual colors and formatting
- **Full color support** - 16 standard colors (black, red, green, yellow, blue, magenta, cyan, white + bright variants)
- **Text formatting** - Bold, dim, italic, underline, blink, reverse, strikethrough
- **Terminal-styled dark theme** - GitHub-inspired dark colors
- **Color-coded labels** - SEND (green) vs RECV (cyan) direction labels
- **Self-contained** - No external dependencies, works offline
- **Monospace font** - Authentic terminal look with Consolas/Monaco

## Usage

```bash
# Basic usage - creates sample.html
python telnet-gui-log2html.py sample.log

# Specify output filename
python telnet-gui-log2html.py session.log output.html

# Show help
python telnet-gui-log2html.py
```

## Example

Given a telnet log file with ANSI color codes:

```
=== Telnet session started: 2025-01-15T14-30-25 (socket 3) ===
[2025-01-15T14:30:25] SEND: look\r\n
[2025-01-15T14:30:25] RECV: \x1b[1;32mYou are standing in a dark forest.\x1b[0m\r\n
[2025-01-15T14:30:26] SEND: north\r\n
[2025-01-15T14:30:26] RECV: <IAC>\xFFYou walk north.\r\n
[2025-01-15T14:30:26] RECV: \x1b[1;33mYou see a golden sword here.\x1b[0m\r\n
=== Telnet session ended: 2025-01-15T14:30:31 ===
```

The script generates an HTML page that:

- **Renders ANSI colors** - Text appears in actual green, yellow, etc. (not as escape codes)
- **Applies formatting** - Bold, underline, italic displayed visually
- **Clean terminal-like output** - No timestamps or SEND/RECV labels, just the actual session
- Dark terminal background (#0d1117)
- Session headers in italic gray
- IAC codes highlighted in orange
- Natural flow like a real terminal

For example:

- `\x1b[1;32m...` renders as **bold green text**
- `\x1b[1;33m...` renders as **bold yellow text**
- `\x1b[4m...` renders as <u>underlined text</u>

**Telnet Protocol Display:**

- Protocol sequences shown using RFC 854 notation
- Example: `<IAC><WONT><ECHO>` instead of hex bytes
- All telnet commands and options converted to symbolic names
- IAC (Interpret As Command) explicitly shown
- Direction labels show which side sends protocol codes:
  - `[SEND]` in green for client → server
  - `[RECV]` in cyan for server → client
  - Regular text has no labels
- Example sequences:
  - `[RECV] <IAC><WILL><SGA>` = Server will suppress go-ahead
  - `[RECV] <IAC><DO><NAWS>` = Server requests window size
  - `[SEND] <IAC><WILL><TERMINAL-TYPE>` = Client will send terminal type

The output shows the session as it would appear in a real terminal - user input and server output flowing naturally without metadata.

## Color Scheme

| Element         | Color     | Description                                                      |
| --------------- | --------- | ---------------------------------------------------------------- |
| Background      | `#0d1117` | Dark gray (GitHub dark)                                          |
| Terminal box    | `#161b22` | Slightly lighter gray                                            |
| Text (default)  | `#c9d1d9` | Light gray (default terminal text)                               |
| IAC codes       | `#ffa657` | Orange (protocol commands)                                       |
| `[SEND]` label  | `#00cd00` | Green (client → server)                                          |
| `[RECV]` label  | `#00cdcd` | Cyan (server → client)                                           |
| Session headers | `#8b949e` | Gray italic (metadata)                                           |
| ANSI colors     | Various   | Red, Green, Yellow, Blue, Magenta, Cyan, White + bright variants |

## Supported ANSI Codes

### Colors (SGR sequences)

**Foreground colors (text):**

- 30-37: Black, Red, Green, Yellow, Blue, Magenta, Cyan, White
- 90-97: Bright variants (Gray, Bright Red, Bright Green, etc.)
- 38;2;R;G;B: 24-bit RGB color

**Background colors:**

- 40-47: Standard background colors
- 100-107: Bright background colors
- 48;2;R;G;B: 24-bit RGB background

### Text Formatting

- **1** - Bold
- **2** - Dim/faint
- **3** - Italic
- **4** - Underline
- **5** - Blink (animated)
- **7** - Reverse video (inverted colors)
- **8** - Hidden/concealed
- **9** - Strikethrough
- **0** - Reset all formatting

### Reset Codes

- **22** - Normal intensity (cancel bold/dim)
- **23** - Not italic
- **24** - Not underline
- **39** - Default foreground color
- **49** - Default background color

## Requirements

- Python 3.6 or higher
- No external packages required (uses stdlib only)

## Log Format

The script expects telnet logs in the format generated by telnet-gui:

```
=== Telnet session started: <timestamp> (socket <n>) ===
[<timestamp>] SEND: <data>
[<timestamp>] RECV: <data>
=== Telnet session ended: <timestamp> ===
```

Where:

- `<timestamp>` is ISO 8601 format: `YYYY-MM-DDTHH:MM:SS` or `YYYY-MM-DDTHH-MM-SS`
- `<data>` contains raw bytes with escape sequences: `\n`, `\r`, `\t`, `\xNN`, `<IAC>`

## Output

The generated HTML is self-contained with inline CSS. You can:

- Open it in any web browser
- Share it via email or file transfer
- Host it on a web server
- Archive it for future reference

File size: Typically ~2-5x the original log file size due to HTML markup and CSS.

## Examples

### Convert a single log file

```bash
python telnet-gui-log2html.py ~/telnet-logs/telnet-localhost-4000-2025-01-15T14-30-25.log
```

### Batch convert all logs in a directory

```bash
# Bash/Linux
for log in ~/telnet-logs/*.log; do
    python telnet-gui-log2html.py "$log"
done

# PowerShell
Get-ChildItem ~/telnet-logs/*.log | ForEach-Object {
    python telnet-gui-log2html.py $_.FullName
}
```

### View in browser immediately

```bash
# Bash/Linux
python telnet-gui-log2html.py session.log && xdg-open session.html

# macOS
python telnet-gui-log2html.py session.log && open session.html

# Windows
python telnet-gui-log2html.py session.log && start session.html
```

## Customization

To customize colors, edit the `CSS_TEMPLATE` variable in `telnet-gui-log2html.py`:

```python
CSS_TEMPLATE = """
.send {
    color: #your-color;  /* Change SEND color */
}
.recv {
    color: #your-color;  /* Change RECV color */
}
"""
```

## Troubleshooting

**Q: Script fails with "Input file not found"**
A: Ensure the log file path is correct and the file exists.

**Q: HTML looks wrong or unstyled**
A: Ensure you're opening the HTML file in a modern web browser (Chrome, Firefox, Edge, Safari).

**Q: Characters appear garbled**
A: The log file should be UTF-8 encoded. Check the encoding if you see strange characters.

**Q: Want to customize colors?**
A: Edit the `CSS_TEMPLATE` variable in the script to change colors and styling.

## License

This script is part of the telnet-gui project. See the main project LICENSE for details.

## See Also

- `telnet-gui` - The telnet client that generates these logs
- `init.lisp` - Configuration for telnet logging (`*enable-telnet-logging*`)
